<h1>Routes</h1>

<p>Fetching requests from the DB.</p>

<dx-data-grid id="gridContainer"
              keyExpr="routeId"
              [dataSource]="routes"
              [remoteOperations]="true"
              [showBorders]="true"
              (onRowInserted)="onRowInserted($event)"
              (onRowUpdated)="onRowUpdated($event)"
              (onRowRemoved)="onRowRemoved($event)"
              (onEditorPreparing)="onEditorPreparing($event)">

  <dxo-paging [pageSize]="2"></dxo-paging>
  <dxo-pager [showPageSizeSelector]="true"
             [allowedPageSizes]="[2, 5, 10]"
             [showInfo]="true"></dxo-pager>

  <dxo-filter-row [visible]="true"></dxo-filter-row>
  <dxo-header-filter [visible]="true"></dxo-header-filter>
  <dxo-group-panel [visible]="true"></dxo-group-panel>
  <dxo-scrolling mode="virtual"></dxo-scrolling>
  <dxo-grouping [autoExpandAll]="false"></dxo-grouping>
  <dxo-editing mode="row"
             [allowAdding]="true"
             [allowUpdating]="true"
             [allowDeleting]="true">
  </dxo-editing>

  <dxi-column dataField="routeId"></dxi-column>
  <dxi-column dataField="routeType" [setCellValue]="setRouteTypeValue">
    <dxo-lookup [dataSource]="routeTypes" valueExpr="value" displayExpr="text"></dxo-lookup>
  </dxi-column>
  <dxi-column dataField="departureTime" dataType="date"></dxi-column>
  <dxi-column dataField="arrivalTime" dataType="date"></dxi-column>
  <dxi-column dataField="ticketType">
    <dxo-lookup [dataSource]="ticketTypes" valueExpr="value" displayExpr="text"></dxo-lookup>
  </dxi-column>
  <dxi-column dataField="departureCity"></dxi-column>
  <dxi-column dataField="arrivalCity"></dxi-column>
  <dxi-column dataField="flightNumber"></dxi-column>
  <dxi-column dataField="classType">
    <dxo-lookup [dataSource]="getFilteredClasses" valueExpr="value" displayExpr="text"></dxo-lookup>
</dxi-column>
  <dxi-column dataField="budget" format="currency"></dxi-column>
  <dxi-column dataField="requestId">
    <dxo-lookup [dataSource]="requests" valueExpr="requestId" displayExpr="requestId"></dxo-lookup>
  </dxi-column>
</dx-data-grid>
